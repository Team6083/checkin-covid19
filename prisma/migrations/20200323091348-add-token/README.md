# Migration `20200323091348-add-token`

This migration has been generated by KennHuang at 3/23/2020, 9:13:48 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "quaint"."Token" (
    "exp" DATE NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    "iat" DATE NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    "iss" INTEGER NOT NULL  ,
    "jti" INTEGER NOT NULL  PRIMARY KEY AUTOINCREMENT,
    "scopes" TEXT NOT NULL DEFAULT '' ,FOREIGN KEY ("iss") REFERENCES "AdminAccounts"("id") ON DELETE CASCADE ON UPDATE CASCADE
) 
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200323010558-make-card-uuid-opitional..20200323091348-add-token
--- datamodel.dml
+++ datamodel.dml
@@ -1,6 +1,6 @@
 datasource sqlite {
-  url = "***"
+  url      = "file:data.db"
   provider = "sqlite"
 }
 generator client {
@@ -21,9 +21,18 @@
   temperature Float
 }
 model AdminAccounts {
-  id           Int    @default(autoincrement()) @id
-  userName     String @unique
+  id           Int     @default(autoincrement()) @id
+  userName     String  @unique
   passwordHash String
   salt         String
+  tokens       Token[]
+}
+
+model Token {
+  jti    Int           @default(autoincrement()) @id
+  iss    AdminAccounts @relation(references: [id])
+  iat    DateTime
+  exp    DateTime
+  scopes String
 }
```


