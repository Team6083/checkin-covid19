# Migration `20200323102716-init`

This migration has been generated by KennHuang at 3/23/2020, 10:27:16 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "quaint"."User" (
    "cardUUID" TEXT   ,
    "name" TEXT NOT NULL DEFAULT '' ,
    "studentNumber" TEXT NOT NULL  ,
    PRIMARY KEY ("studentNumber")
) 

CREATE TABLE "quaint"."CheckinLog" (
    "checkinAt" DATE NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    "id" INTEGER NOT NULL  PRIMARY KEY AUTOINCREMENT,
    "temperature" REAL NOT NULL DEFAULT 0 ,
    "user" TEXT NOT NULL  ,FOREIGN KEY ("user") REFERENCES "User"("studentNumber") ON DELETE CASCADE ON UPDATE CASCADE
) 

CREATE TABLE "quaint"."AdminAccounts" (
    "id" INTEGER NOT NULL  PRIMARY KEY AUTOINCREMENT,
    "passwordHash" TEXT NOT NULL DEFAULT '' ,
    "salt" TEXT NOT NULL DEFAULT '' ,
    "userName" TEXT NOT NULL DEFAULT '' 
) 

CREATE TABLE "quaint"."Token" (
    "exp" DATE NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    "iat" DATE NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    "iss" INTEGER NOT NULL  ,
    "jti" INTEGER NOT NULL  PRIMARY KEY AUTOINCREMENT,
    "scopes" TEXT NOT NULL DEFAULT '' ,FOREIGN KEY ("iss") REFERENCES "AdminAccounts"("id") ON DELETE CASCADE ON UPDATE CASCADE
) 

CREATE UNIQUE INDEX "quaint"."AdminAccounts.userName" ON "AdminAccounts"("userName")
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration ..20200323102716-init
--- datamodel.dml
+++ datamodel.dml
@@ -1,0 +1,38 @@
+datasource sqlite {
+  url      = "file:data.db"
+  provider = "sqlite"
+}
+
+generator client {
+  provider = "prisma-client-js"
+}
+
+model User {
+  studentNumber String       @id
+  cardUUID      String?
+  name          String
+  checkinLogs   CheckinLog[]
+}
+
+model CheckinLog {
+  id          Int      @default(autoincrement()) @id
+  user        User     @relation(references: [studentNumber])
+  checkinAt   DateTime
+  temperature Float
+}
+
+model AdminAccounts {
+  id           Int     @default(autoincrement()) @id
+  userName     String  @unique
+  passwordHash String
+  salt         String
+  tokens       Token[]
+}
+
+model Token {
+  jti    Int           @default(autoincrement()) @id
+  iss    AdminAccounts @relation(references: [id])
+  iat    DateTime
+  exp    DateTime
+  scopes String
+}
```


